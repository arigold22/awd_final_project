{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile</title>
    {% tailwind_css %}
    <link rel="stylesheet" href="../static/css/profile.css">
    <script src="{% static 'fontawesomefree/js/all.min.js' %}"></script>
    <script src="../static/js/menu_handling.js"></script>
    <script>
      function toggleFriends(){
        let friendsContainer = document.getElementById("friendsContainer");
        if(friendsContainer.style.display == "none"){
          friendsContainer.style.display = "flex";
          document.body.style.overflow = "hidden";
          document.html.style.overflow = "hidden";
        }else{
          friendsContainer.style.display = "none";
          document.body.style.overflow = "auto";
          document.html.style.overflow = "auto";
        }
      }
    </script>
  </head>
  <body>
    {% include "./menu.html" %}
    {% if user.is_authenticated %}
    <div id="friendsContainer" style="width: 100%; height: 100%; background-color: rgba(0,0,0, 0.75); z-index: 1; position: fixed; display: flex; align-items: center; justify-content: center; display: none;">
      <div style="width: 50%; background-color: white; height: 80%; border-radius: 10px; box-shadow: 0px 0px 10px rgba(0,0,0,0.2);">
        <div style="display: flex; justify-content: end;" onclick="toggleFriends()">
          <i class="fa-solid fa-x" style="padding: 20px;"></i>
        </div>

      </div>
    </div>
    {% if profile_data.profile_cover_photo == "" %}
      <div style="width: 100%; height: 250px; background-color: black; z-index: -1;">

      </div>
      {% else %}
      <div style="border-bottom: black solid; width: 100%; height: 270px;">
        <img src="{{ profile_data.profile_cover_photo.url }}" style="object-fit: cover; width: 100%; height: 100%; " alt="Profile Picture">
      </div>
    </div> 
      {% endif %}
     
    <div id="profileHeader"
    >
      {% load static %}
      
      <div style="border: black solid; width: 150px; height: 150px; border-radius: 50%; position: absolute; top: 230px;">
        <img src="{{ profile_data.profile_image.url }}" style="object-fit: cover; width: 100%; height: 100%; border-radius: 50%;" alt="Profile Picture">
      </div>
      
      <div
        style="
          display: flex;
          flex-direction: row;
          justify-content: space-between;
          align-items: start;
          width: 100%;
          margin-top: 60px;
        "
      >
        <div 
          style="
            display: flex;
            flex-direction: column;
            padding-left: 10px;
            flex: 1;
          "
        >
          <span style="font-size: 1.2em; font-weight: 600;">{{ profile_data.user.first_name }} {{ profile_data.user.last_name }}</span>
          <span style="font-size: 1em">@{{ profile_data.user.username }}</span>
          <div style="color: grey; text-decoration-line: underline;" onclick="toggleFriends()"><span> 0 Friends</span></div>
          <span>{{ profile_data.profile_bio }}</span>
        </div>
        {% if profile_data.user == user %}
        <button style="margin: 1em; align-self: flex-end; justify-self: flex-end;"><i class="fa fa-edit"></i></button>
        {% endif %}
      </div>
    </div>
    <div style="padding: 10px 10px 10px 30px; padding-bottom: 10px; border-top: black solid;">
      <span id="currentStatus"> I am at work!!</span><br>
      <a href="">View Previous Status Updates</a><br>
      <!-- Update status automatically, like when a users phone is close to there partners phone, dnd. Or when at work, make status at work. -->
    </div>
    <div style="border-top: black solid; display: flex; flex-direction: row; justify-content: space-between;">
      <input type="button" value="Posts" class="profileMenuButton" >
      <input type="button" value="Comments" class="profileMenuButton" >
      <input type="button" value="Likes" class="profileMenuButton" >
      <input type="button" value="Media" class="profileMenuButton" >
    </div>
    <div id="allPosts" style="display: flex; flex-direction: column; border-top: black solid; align-items: center;  padding: 10px;">
      {% for post in posts %}   
          {% include "./post.html" %}
      {% endfor %}
    </div>
    {% endif %}
  </body>
</html>
